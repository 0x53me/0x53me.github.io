<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <title>新居浜高専 寮食Bot</title>
        <link rel="icon" type="image/png" href="images/bacon.png">
        <meta name="date" content="2025-02-21">
        <meta name="description" content="新居浜高専学寮食堂非公式サイト">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <!--CSS-->
        <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
        <link rel="stylesheet" href="css/style.css">
        <!--Fonts-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&family=Noto+Sans+JP:wght@100..900&display=swap" rel="stylesheet">
    </head>
    <body>
        <!--header-->
        <header class="header">
            <h1 style="font-family: Kosugi Maru,serif;"><a href="index.html"><img class="logo" src="images/gohan.png" alt="Home"></a> 新居浜高専学寮食堂(非公式)</h1>
            <nav class="nav">
                <span class="nav_toggle">
                    <i></i><i></i><i></i>
                </span>
                <ul class="nav_menu_ul">
                    <li class="nav_menu_li"><a href="/">Home</a></li>
                    <li class="nav_menu_li"><a href="/News.html">News</a></li>
                    <li class="nav_menu_li"><a href="/Version.html">Version</a></li>
                    <li class="nav_menu_li"><a href="/Archive.html">Archive</a></li>
                </ul>
            </nav>
        </header>
        <!--content-->
        <div class="wrapper content">
            <article class="post">
                <header>
                    <h1 class="post-title">寮食Botを作った話。</h1>
                    <div class="post-info">
                        <ul class="post-cat">
                            <li><a href="#">寮食Bot</a></li>
                            <li><a href="#">記事</a></li>
                        </ul>
                        <time class="post-date" dateime="2025-02-22">2025年2月24日更新</time>
                    </div>
                </header>
                <img class="post-thumbnail" src="images/bacon.png" alt="bacon">
                <div class="honbun">
                    <p>0x53です。<br><br>寮食Botを作った経緯と仕組みを簡単に書こうと思います。</p>
                        <!-- 自動生成される目次 -->
                        <nav class="toc">
                            <h1>目次</h1>
                            <ul id="toc-list"></ul>
                        </nav>
                    
                        <br>
                        <h2>1. 寮食Botを作ろうと思った経緯</h2>
                        <p>そもそも、今日の献立を見ようとすると</p>
                        <p>1.新居浜高専学寮HPにアクセス</p>
                        <p>2.学寮食堂のページへ</p>
                        <p>3.今月のPDFファイルを選択</p>
                        <p>4.今日の日付までスクロールする</p>
                        <P>という手順が必要なんですよね。</P>
                        <p>実際のPDF↓</p>
                        <iframe src="https://www.off.niihama-nct.ac.jp/gakuryo-a/kondate/2024PDF/jan.pdf" style="width: 80%; height: 250px;"></iframe>
                        <a href="https://www.off.niihama-nct.ac.jp/gakuryo-a/kondate/ryoushoku.html"><br>学寮食堂公式ページ</a>より
                        <br>(https://www.off.niihama-nct.ac.jp/gakuryo-a/kondate/ryoushoku.html)
                        <p></p>
                        <p>今日の献立だけを見る には時間がかかるし、スマホだと少し見づらいんですよね。</p>
                        <p>ということで寮食Botを作ろうと思いました。</p>

                        <h2>2. 寮食Bot(LINE版)</h2>
                        <P>まず、初めに考えたのがLINEで毎朝、自動で寮食の献立を送信するというものです。</P>
                        <p>いろいろググっていると、Googleスプレッドシートのデータを自動でメール送信する記事と、
                            メールをLINEに自動転送する記事を見つけたので、
                            それらを参考にスプレッドシートに打ち込んだ寮食の献立データをメールで送信し、LINEに転送するというプログラムを作りました。
                        </p>
                        <p>GAS(GoogleAppScript)というJavaScript系の言語?で作りました。
                            <br>これを使うとGoogleのサービスを自動化できます。
                        </p>
                        <p>製作期間は1週間ほどだったと思います。
                            <br>(思いっきり試験期間中に作った記憶)</p>
                        <p>実際に送られてくるLINEはこんな感じです。</p>
                        <br>
                        <img src="images/20250222/01.webp" alt="LINE版寮食Bot" style="width: 300px; display: block; margin: auto;">
                        <p><br>これを作ってから1年半以上問題なく毎日動いてます。</p>
                        <p>献立を手軽に見れるようになりとても便利になりました。</p>
                        <p>LINE Notifyというものを使っているんですが、<br>2025年3月31日でサービス終了らしく、使えなくなるのつらい (TT) </p> 
                        
                        <h2>3. Webサイト版</h2>
                        <p>LINE版寮食Botが使えなくなるので、作りました。</p>
                        <p>GithubPagesというものを使っているので、サーバー代がかからないです。</p>
                        <p>仕組みは.CSV(各項目が,で区切られたデータ)を読み込みHTML内で表示するというものです。</p>
                        <p>これもググって参考になりそうなものを見つけ、何とか動くものを作りました。</p>
                        <p>(HTMLとCSS初心者なのでおかしな部分あるもです。)</p>
                        <ul style="margin-left: 30px;">
                            <li><a href="https://0x53me.github.io/today">今日の献立ページ</a></li>
                            <li><a href="https://0x53me.github.io/month">今月の献立ページ</a></li>
                        </ul><br>
                        <p>今後はコメントや評価機能もつけたいなと思ってます。</p>
                        <p>要望あれば連絡ください。</p>

                    
                        <h2>4. 寮食Bot(X版)</h2>
                        <p>Web上で公開しているデータをiPadにもともと入ってある「ショートカット」というアプリを使って取得し、Xにポストするというものです。</p>
                        <p>言葉だとわかりにくいので写真を見せるとこんな感じ、</p>
                        <img src="images/20250222/03.webp" alt="shortcutapp" style="width: 100%;">
                        <p><br>で、実際の投稿がこんな感じ<br></p>
                        <blockquote class="twitter-tweet"><p lang="ja" dir="ltr">新居浜高専 寮食Bot<br><br>今日(2025年1月7日)の献立です<br><br>[朝食]<br>・チキンナゲット<br>・玉葱のサラダ<br>・マカロニと野菜のスープ<br><br>[昼食]<br>・七草の和風スパゲティ<br>・豆苗の香味和え<br><br>[夕食]<br>・ハンバーグジンジャーソース<br>・ケチャップスパゲティー<br>・キャベツとえのきの味噌汁<br><br>昼特:プリン</p>&mdash; 0x53 (@0x53me) <a href="https://twitter.com/0x53me/status/1876584594746769901?ref_src=twsrc%5Etfw">January 7, 2025</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                        <p><br>このアプリには指定した時間に自動でショートカットを実行するという機能があるんですが、
                            <br>Xに投稿するには投稿ボタンを手動で押してあげる必要があるんですよね。</p>
                        <p>つまり、Xの投稿に関しては半分手動でやってます。</p>
                    
                        <h2>5. 最後に</h2>
                        <p>全部自己満で作ってます。</p>
                        <p>使ってくれるとうれしいです。</p>

                        <script src="js/script.js"></script>
                </div>
            </article>
        </div>
        <!--footer-->
        <footer class="footer">
            <div class="copyright">
                <small>&copy;2025 0x53me</small>
            </div>
        </footer>
    </body>
</html>